---
const { title, img, desc, url, badge, badges, tags, target = "_blank", repoUrl, demoUrl, relatedPapers } = Astro.props;
import { Image } from "astro:assets";
const tag_url = url.split("/").slice(0, -1).join("/") + "/tag";
const displayBadges = badges ?? (badge ? [badge] : []);
---

<div
  class="rounded-lg bg-base-100 hover:shadow-lg transition ease-in-out hover:scale-[101%]"
>
  <a href={url} target={target}>
    <div class="hero-content flex-col md:flex-row">
      {
        img && (
          <Image
            src={img}
            width={750}
            height={422}
            format="webp"
            alt={title}
            class="max-w-full md:max-w-[13rem] max-h-36 object-contain rounded-lg"
          />
        )
      }
      <div class="grow w-full">
        <div class="flex flex-wrap items-start justify-between gap-2">
          <h1 class="text-xl font-bold">
            {title}
            {displayBadges &&
              displayBadges.map((b) => <div class="badge badge-secondary mx-2">{b}</div>)}
          </h1>
          {(repoUrl || demoUrl || (relatedPapers && relatedPapers.length > 0)) && (
            <div class="flex items-center gap-3 text-base-content/80">
              {repoUrl && repoUrl !== "#" && (
                <a href={repoUrl} target="_blank" class="hover:text-primary" aria-label="Code">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" style="fill: currentColor;"><path d="M9.04 7.913 12 9.78l2.96-1.868a1 1 0 1 1 1.08 1.675L12.54 11.22l3.5 2.207a1 1 0 0 1-1.08 1.675L12 13.234l-2.96 1.868a1 1 0 1 1-1.08-1.675l3.5-2.207-3.5-2.208a1 1 0 0 1 1.08-1.675Z"></path><path fill-rule="evenodd" d="M12 2c-2.288 0-4.042 0-5.37.123-1.346.124-2.39.38-3.25.982a5 5 0 0 0-1.275 1.275c-.602.86-.858 1.904-.982 3.25C1 8.958 1 10.712 1 13c0 2.288 0 4.042.123 5.37.124 1.346.38 2.39.982 3.25a5 5 0 0 0 1.275 1.275c.86.602 1.904.858 3.25.982C7.958 24 9.712 24 12 24c2.288 0 4.042 0 5.37-.123 1.346-.124 2.39-.38 3.25-.982a5 5 0 0 0 1.275-1.275c.602-.86.858-1.904.982-3.25C23 17.042 23 15.288 23 13c0-2.288 0-4.042-.123-5.37-.124-1.346-.38-2.39-.982-3.25a5 5 0 0 0-1.275-1.275c-.86-.602-1.904-.858-3.25-.982C16.042 2 14.288 2 12 2Zm-4.37 1.617C7.957 3.496 9.593 3.5 12 3.5c2.406 0 4.043-.004 5.37.117 1.304.12 1.955.349 2.395.658.36.253.652.584.875.975.309.54.538 1.291.658 2.595.12 1.327.117 2.963.117 5.359 0 2.397.003 4.033-.117 5.36-.12 1.304-.35 2.055-.658 2.595a3 3 0 0 1-.875.875c-.44.31-1.09.538-2.395.658-1.326.12-2.963.117-5.37.117-2.407 0-4.043.003-5.37-.117-1.304-.12-1.955-.35-2.395-.658a3 3 0 0 1-.875-.875c-.31-.54-.538-1.291-.658-2.595C2.5 17.033 2.5 15.397 2.5 13c0-2.396.003-4.033.117-5.36.12-1.304.35-2.055.658-2.595.223-.391.515-.722.875-.975.44-.309 1.09-.538 2.395-.658Z" clip-rule="evenodd"></path></svg>
                </a>
              )}
              {demoUrl && demoUrl !== "#" && (
                <a href={demoUrl} target="_blank" class="hover:text-primary" aria-label="Demo">
                  ğŸŒ
                </a>
              )}
              {relatedPapers && relatedPapers.length > 0 && (
                <a href={relatedPapers[0].url} target="_blank" class="hover:text-primary" aria-label="Related paper">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" style="fill: currentColor;"><path d="M19 21H5a2 2 0 0 1-2-2V4.993C3 3.893 3.898 3 4.99 3H8v2H5v14h14v-3h2v3a2 2 0 0 1-2 2ZM13 5h4.586l-7.607 7.607 1.414 1.414L19 6.414V11h2V3h-8v2Z"></path></svg>
                </a>
              )}
            </div>
          )}
        </div>
        <p class="py-1 text-1xl" set:html={desc}></p>
        {tags && tags.length > 0 && (
          <div class="card-actions justify-start flex flex-wrap gap-2 mt-2">
            {tags.map((tag) => (
              <a href={`${tag_url}/${tag}`} class="badge badge-outline opacity-80">
                {tag}
              </a>
            ))}
          </div>
        )}
      </div>
    </div>
  </a>
</div>
